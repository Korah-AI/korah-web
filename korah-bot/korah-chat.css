/* ── Korah Chat Interface — korah-chat.css ── */

body { font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; overflow: hidden; height: 100vh; }

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 5px }
::-webkit-scrollbar-track { background: transparent }
::-webkit-scrollbar-thumb { background: #5b21b6; border-radius: 3px }

/* ── CSS Variables ── */
[data-theme="dark"] {
    --bg:#06040f; --bg2:#0d0920; --bg3:#120c28;
    --sf:rgba(18,12,40,.7); --sf2:rgba(30,18,60,.6);
    --bd:rgba(139,92,246,.2); --bd2:rgba(139,92,246,.1);
    --tx:#f0eaff; --tx2:#a89dc0; --tx3:#6b5f88;
    --p4:#8b5cf6; --p5:#a78bfa; --ac:#f0abfc;
    --gold:#fbbf24; --grn:#34d399; --red:#f87171;
    --glow:rgba(139,92,246,.35);
    --nb:rgba(6,4,15,.85); --cb:rgba(15,9,35,.82);
    --cu:rgba(91,33,182,.25); --ca:rgba(18,12,40,.9);
    --mg:#22c55e; --my:#eab308; --mr:#ef4444;
    --sidebar-w: 260px;
    --p-gen:#8b5cf6; --p-gen-glow:rgba(139,92,246,0.3);
}
[data-theme="light"] {
    --bg:#faf8ff; --bg2:#f3efff; --bg3:#ebe5ff;
    --sf:rgba(255,255,255,.85); --sf2:rgba(243,239,255,.9);
    --bd:rgba(109,40,217,.18); --bd2:rgba(109,40,217,.1);
    --tx:#1a0a3c; --tx2:#5a4a7a; --tx3:#9080aa;
    --p4:#8b5cf6; --p5:#7c3aed; --ac:#a21caf;
    --gold:#d97706; --grn:#059669; --red:#dc2626;
    --glow:rgba(109,40,217,.15);
    --nb:rgba(250,248,255,.9); --cb:rgba(255,255,255,.92);
    --cu:rgba(109,40,217,.12); --ca:rgba(243,239,255,.95);
    --mg:#16a34a; --my:#ca8a04; --mr:#dc2626;
    --sidebar-w: 260px;
    --p-gen:#7c3aed; --p-gen-glow:rgba(124,58,237,0.15);
}

/* ── Animations ── */
@keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
@keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px) }
    to   { opacity: 1; transform: none }
}
@keyframes pulse-glow {
    0%, 100% { filter: drop-shadow(0 0 15px var(--glow)) }
    50% { filter: drop-shadow(0 0 25px var(--p4)) }
}
@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg) }
    50% { transform: translateY(-10px) rotate(2deg) }
}
@keyframes soft-pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.05); opacity: 0.9; }
}

/* ── Typing Animation ── */
.typing-text {
    overflow: hidden;
    border-right: 2px solid var(--p4);
    white-space: nowrap;
    margin: 0 auto;
    letter-spacing: .05em;
    animation: 
        typing 3.5s steps(40, end),
        blink-caret .75s step-end infinite;
}

@keyframes typing {
    from { width: 0 }
    to { width: 100% }
}

@keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: var(--p4) }
}

/* ── Star and Background enhancements ── */
#bg-canvas { 
    background: radial-gradient(circle at center, var(--bg2) 0%, var(--bg) 100%);
    filter: blur(1px);
    opacity: 0.8;
}

.shooting-star {
    position: absolute;
    height: 2px;
    background: linear-gradient(90deg, rgba(255,255,255,1), rgba(255,255,255,0));
    border-radius: 999px;
    filter: drop-shadow(0 0 6px white);
    animation: shoot 3s ease-out infinite;
    z-index: 1;
}

@keyframes shoot {
    0% { transform: translateX(0) translateY(0) rotate(-45deg) scale(0); opacity: 1; }
    70% { opacity: 1; }
    100% { transform: translateX(-1000px) translateY(1000px) rotate(-45deg) scale(1); opacity: 0; }
}

.mascot-avatar {
    width: 72px;
    height: 72px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
    animation: float 6s ease-in-out infinite;
}

.logo-btn {
    transition: transform .3s cubic-bezier(.23,1,.32,1), box-shadow .3s;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    animation: soft-pulse 4s ease-in-out infinite;
}

/* ── Semantic helpers ── */
.bg-base  { background: var(--bg) }
.bg-base2 { background: var(--bg2) }
.bg-card  { background: var(--cb) }
.bg-sf    { background: var(--sf) }
.bg-sf2   { background: var(--sf2) }
.bd       { border-color: var(--bd) }
.bd2      { border-color: var(--bd2) }
.tx       { color: var(--tx) }
.tx2      { color: var(--tx2) }
.tx3      { color: var(--tx3) }
.tx-p4    { color: var(--p4) }
.tx-p5    { color: var(--p5) }
.tx-grn   { color: var(--grn) }
.tx-gold  { color: var(--gold) }
.tx-mg    { color: var(--mg) }
.tx-my    { color: var(--my) }
.tx-mr    { color: var(--mr) }

.grad-text {
    background: linear-gradient(135deg, var(--p4), var(--ac));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    filter: drop-shadow(0 0 24px var(--glow));
}
.grad-bg { background: linear-gradient(135deg, #5b21b6, var(--p4)) }

.glass    { backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); background: var(--sf) }
.glass-sm { backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); background: var(--sf) }

.shadow-glow    { box-shadow: 0 0 25px var(--glow) }
.shadow-glow-lg { box-shadow: 0 0 45px var(--glow) }

.t-theme { transition: background-color .4s, border-color .4s, color .4s }
.t-btn   { transition: transform .3s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow .3s, filter .3s, background-color .3s, opacity .3s }
.t-btn:hover { transform: translateY(-3px) scale(1.02); }
.t-btn:active { transform: translateY(0) scale(.95) }

/* ── Layout ── */
body { display: flex; background: var(--bg) }

.sidebar {
    width: var(--sidebar-w);
    min-width: var(--sidebar-w);
    height: 100vh;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--bd);
    padding: 20px 16px;
    gap: 4px;
    z-index: 100;
    transition: width .35s cubic-bezier(.23,1,.32,1), min-width .35s cubic-bezier(.23,1,.32,1), transform .35s cubic-bezier(.23,1,.32,1), opacity .35s;
    overflow: hidden;
}

.sidebar.collapsed {
    width: 0;
    min-width: 0;
    padding: 0;
    opacity: 0;
    pointer-events: none;
}

.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    flex-shrink: 0;
}

.logo-btn {
    transition: transform .3s cubic-bezier(.23,1,.32,1), box-shadow .3s;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    animation: soft-pulse 4s ease-in-out infinite;
}
.logo-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,.2), transparent);
}
.logo-btn:hover { transform: rotate(-5deg) scale(1.08); box-shadow: 0 0 36px var(--glow) }
.logo-letter { font-family: 'Plus Jakarta Sans', sans-serif; color: white; font-size: 18px; position: relative; z-index: 1; }

.new-chat-btn {
    font-size: 11px;
    padding: 7px 14px;
    border-radius: 20px;
    white-space: nowrap;
    flex-shrink: 0;
}
.new-chat-btn:hover { filter: brightness(1.15); transform: translateY(-1px); box-shadow: 0 0 20px var(--glow) }

.sidebar-nav {
  display: flex;
  gap: 6px;
  margin-bottom: 16px;
  flex-shrink: 0;
}
.sidebar-nav-link {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid var(--bd2);
  background: var(--sf2);
  color: var(--tx2);
  font-size: 11px;
  font-weight: 600;
  font-family: 'Plus Jakarta Sans', sans-serif;
  text-decoration: none;
  white-space: nowrap;
  transition: border-color .2s, color .2s, background .2s;
}
.sidebar-nav-link:hover { border-color: var(--p4); color: var(--p5); background: var(--cu) }
.sidebar-nav-link.active { background: var(--cu); color: var(--p5); border-color: var(--bd) }

.sidebar-section-label {
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    color: var(--tx3);
    padding: 0 6px;
    margin: 12px 0 6px;
    flex-shrink: 0;
}

.chat-history {
    display: flex;
    flex-direction: column;
    gap: 2px;
    overflow-y: auto;
    max-height: 200px;
}

.history-item {
    display: flex;
    align-items: center;
    gap: 9px;
    padding: 9px 10px;
    border-radius: 12px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--tx2);
    font-size: 12.5px;
    font-weight: 500;
    font-family: 'Plus Jakarta Sans', sans-serif;
    text-align: left;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    position: relative;
}
.history-item:hover { background: var(--bd2); color: var(--tx) }
.history-item:hover .history-actions { opacity: 1; pointer-events: all }
.history-item.active { background: var(--cu); color: var(--p5); border: 1px solid var(--bd) }
.history-icon { font-size: 14px; flex-shrink: 0 }
.history-text { overflow: hidden; text-overflow: ellipsis; flex: 1 }
.history-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    pointer-events: none;
    transition: opacity .2s;
    flex-shrink: 0;
}
.history-action-btn {
    width: 22px;
    height: 22px;
    border-radius: 6px;
    border: none;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--tx3);
    padding: 0;
    transition: background .2s, color .2s;
}
.history-action-btn:hover { background: var(--cu); color: var(--p4) }
.history-action-btn.delete-btn:hover { color: var(--red); background: rgba(239,68,68,.08) }

.study-items-history { max-height: 160px }

.sidebar-footer {
    margin-top: auto;
    padding-top: 16px;
    border-top: 1px solid var(--bd2);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
}
.sidebar-footer-actions {
    display: flex;
    gap: 6px;
}

.mood-indicator {
    display: flex;
    align-items: center;
    gap: 7px;
}

.theme-toggle-small {
    width: 32px;
    height: 32px;
    border-radius: 10px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
}
.theme-toggle-small:hover { border-color: var(--p4); background: var(--cu) }

/* ── Main content ── */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
    min-width: 0;
}

/* ── Top bar ── */
.chat-topbar {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 0 20px;
    height: 60px;
    border-bottom: 1px solid var(--bd);
    flex-shrink: 0;
    z-index: 50;
}

.sidebar-toggle-btn {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    border: 1px solid var(--bd2);
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
.sidebar-toggle-btn:hover { border-color: var(--p4); color: var(--p4); background: var(--cu) }

.chat-title-area {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
    overflow: hidden;
}

.korah-status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--grn);
    box-shadow: 0 0 8px var(--grn);
    flex-shrink: 0;
    animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
    0%, 100% { opacity: 1; transform: scale(1) }
    50% { opacity: .7; transform: scale(.85) }
}

.topbar-actions {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
}

.topbar-btn {
    width: 34px;
    height: 34px;
    border-radius: 9px;
    border: 1px solid var(--bd2);
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}
.topbar-btn:hover { border-color: var(--p4); color: var(--p4); background: var(--cu) }

/* ── Mode Selector ── */
.mode-selector-wrapper {
    position: relative;
    flex-shrink: 0;
}
.mode-selector-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 12px;
    border-radius: 10px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    color: var(--tx);
    font-family: 'Plus Jakarta Sans', sans-serif;
}
.mode-selector-btn:hover { border-color: var(--p4); background: var(--cu) }
.mode-icon { font-size: 16px; line-height: 1 }
.mode-name { white-space: nowrap }
.mode-dropdown {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    min-width: 280px;
    background: var(--cb);
    border: 1px solid var(--bd);
    border-radius: 14px;
    padding: 8px;
    display: none;
    flex-direction: column;
    gap: 4px;
    box-shadow: 0 8px 24px rgba(0,0,0,.3);
    z-index: 100;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}
.mode-dropdown.show { display: flex; animation: dropIn .2s ease both }
@keyframes dropIn {
    from { opacity: 0; transform: translateY(-8px) }
    to { opacity: 1; transform: translateY(0) }
}
.mode-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 10px;
    cursor: pointer;
    transition: background .2s, transform .15s;
}
.mode-option:hover { background: var(--cu); transform: translateX(2px) }
.mode-option-icon { font-size: 20px; flex-shrink: 0 }
.mode-option-info { flex: 1 }
.mode-option-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--tx);
    margin-bottom: 2px;
}
.mode-option-desc {
    font-size: 11px;
    color: var(--tx3);
    line-height: 1.3;
}

/* ── Chat body ── */
.chat-body {
    flex: 1;
    overflow-y: auto;
    padding: 24px 20px;
    display: flex;
    flex-direction: column;
    scrollbar-width: thin;
}
.chat-body::-webkit-scrollbar { width: 4px }
.chat-body::-webkit-scrollbar-thumb { background: var(--bd); border-radius: 2px }

#messages-container {
    max-width: 720px;
    width: 100%;
    margin: 0 auto;
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* ── Welcome screen ── */
.welcome-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;
    padding: 40px 20px;
    gap: 16px;
    animation: fadeUp .6s ease both;
}

@keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px) }
    to   { opacity: 1; transform: none }
}

.welcome-mascot {
    position: relative;
    margin-bottom: 8px;
}

.mascot-avatar {
    width: 72px;
    height: 72px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
}
.mascot-letter {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 2px;
    font-weight: 900;
    color: white;
}

.mascot-ring {
    position: absolute;
    inset: -8px;
    border-radius: 26px;
    border: 2px solid var(--p4);
    opacity: .4;
    animation: ring-pulse 2.5s ease-in-out infinite;
}

@keyframes ring-pulse {
    0%, 100% { opacity: .4; transform: scale(1) }
    50% { opacity: .15; transform: scale(1.06) }
}

.suggestion-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    width: 100%;
    max-width: 480px;
    margin-top: 8px;
}

.suggestion-chip {
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    cursor: pointer;
    color: var(--tx2);
    font-size: 12px;
    font-weight: 500;
    font-family: 'Plus Jakarta Sans', sans-serif;
    text-align: left;
    line-height: 1.4;
    transition: border-color .2s, color .2s, background .2s, transform .2s;
}
.suggestion-chip:hover { border-color: var(--p4); color: var(--tx); background: var(--cu); transform: translateY(-2px) }

.mood-picker-mini {
    margin-top: 8px;
}

.mood-row {
    display: flex;
    gap: 8px;
}

.mood-mini {
    padding: 8px 14px;
    border-radius: 20px;
    border: 1.5px solid var(--bd);
    background: var(--sf2);
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Plus Jakarta Sans', sans-serif;
    color: var(--tx2);
    transition: all .2s;
    white-space: nowrap;
}
.mood-mini:hover { transform: translateY(-1px) }
.mood-mini.gm { border-color: var(--mg); }
.mood-mini.ym { border-color: var(--my); }
.mood-mini.rm { border-color: var(--mr); }
.mood-mini.gm.active { background: rgba(34,197,94,.12); color: var(--mg) }
.mood-mini.ym.active { background: rgba(234,179,8,.12); color: var(--my) }
.mood-mini.rm.active { background: rgba(239,68,68,.12); color: var(--mr) }

/* ── Messages ── */
#messages-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding-top: 8px;
}

.msg-row {
    display: flex;
    gap: 12px;
    animation: msgIn .4s cubic-bezier(.23,1,.32,1) both;
}

@keyframes msgIn {
    from { opacity: 0; transform: translateY(12px) }
    to   { opacity: 1; transform: none }
}

.msg-row.user { flex-direction: row-reverse }

.msg-avatar {
    width: 32px;
    height: 32px;
    border-radius: 10px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 800;
    font-family: 'Plus Jakarta Sans', sans-serif;
    align-self: flex-end;
}
.msg-avatar.korah-av {
    background: linear-gradient(135deg, #5b21b6, var(--p4));
    color: white;
    box-shadow: 0 0 14px var(--glow);
}
.msg-avatar.user-av {
    background: var(--sf2);
    border: 1px solid var(--bd);
    color: var(--tx2);
    font-size: 14px;
}

.msg-bubble {
    max-width: 75%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 13.5px;
    line-height: 1.65;
    border: 1px solid var(--bd);
}

.msg-bubble.korah {
    background: var(--ca);
    border-radius: 18px 18px 18px 4px;
}
.msg-bubble.user {
    background: var(--cu);
    border-radius: 18px 18px 4px 18px;
    color: var(--tx);
}

.msg-label {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--p4);
    margin-bottom: 5px;
}
.msg-label-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--p4);
    animation: pulse-dot 2s ease-in-out infinite;
}

/* Markdown-ish styling inside korah bubbles */
.msg-bubble.korah strong { color: var(--p5); font-weight: 700 }
.msg-bubble.korah em { color: var(--ac); font-style: italic }
.msg-bubble.korah code {
    background: rgba(139,92,246,.15);
    color: var(--p5);
    padding: 1px 6px;
    border-radius: 5px;
    font-size: 12px;
    font-family: monospace;
}
.msg-bubble.korah ul, .msg-bubble.korah ol {
    margin: 8px 0;
    padding-left: 20px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.msg-bubble.korah li { line-height: 1.5 }
.msg-bubble.korah h3 {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-weight: 700;
    font-size: 15px;
    color: var(--tx);
    margin: 10px 0 4px;
}
.msg-bubble.korah p { margin: 4px 0 }
.msg-bubble.korah .flashcard-set {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 10px;
}
.msg-bubble.korah .fc-item {
    background: rgba(139,92,246,.08);
    border: 1px solid var(--bd2);
    border-radius: 10px;
    padding: 9px 12px;
    font-size: 12.5px;
}
.msg-bubble.korah .fc-q { color: var(--p5); font-weight: 600; margin-bottom: 3px }
.msg-bubble.korah .fc-a { color: var(--tx2) }

/* Inline suggestions in AI messages */
.inline-suggestions {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid var(--bd2);
}
.inline-suggestion-btn {
    padding: 8px 12px;
    border-radius: 10px;
    border: 1px solid var(--bd);
    background: rgba(139,92,246,.05);
    cursor: pointer;
    font-size: 12.5px;
    font-weight: 500;
    color: var(--tx);
    font-family: 'Plus Jakarta Sans', sans-serif;
    text-align: left;
    transition: all .2s;
    line-height: 1.4;
}
.inline-suggestion-btn:hover {
    border-color: var(--p4);
    background: var(--cu);
    color: var(--p5);
    transform: translateX(3px);
}
.inline-suggestion-btn::before {
    content: '→';
    margin-right: 8px;
    color: var(--p4);
    font-weight: 600;
}

/* ── Suggestion Bar ── */
.suggestion-bar {
    display: none;
    max-width: 720px;
    width: 100%;
    margin: 0 auto 8px;
    padding: 0 20px;
    gap: 6px;
    flex-wrap: wrap;
    align-items: center;
}
.suggestion-bar.show {
    display: flex;
    animation: slideUp .3s ease both;
}
@keyframes slideUp {
    from { opacity: 0; transform: translateY(10px) }
    to { opacity: 1; transform: translateY(0) }
}
.suggestion-prompt-btn {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 7px 11px;
    border-radius: 9px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    cursor: pointer;
    font-size: 11.5px;
    font-weight: 600;
    color: var(--tx2);
    font-family: 'Plus Jakarta Sans', sans-serif;
    white-space: nowrap;
    transition: all .2s;
}
.suggestion-prompt-btn:hover {
    border-color: var(--p4);
    background: var(--cu);
    color: var(--p5);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--glow);
}
.suggestion-prompt-btn span:first-child {
    font-size: 14px;
    line-height: 1;
}

/* ── Typing indicator ── */
.typing-bar {
    max-width: 720px;
    width: 100%;
    margin: 0 auto;
    padding: 0 0 8px;
    display: flex;
    gap: 12px;
}
.typing-bar.hidden { display: none }
.typing-bubble {
    padding: 12px 16px;
    border-radius: 18px 18px 18px 4px;
    min-width: 70px;
}
.typing-dots {
    display: flex;
    gap: 5px;
    align-items: center;
    height: 16px;
}
.typing-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--p4);
    animation: tbounce .8s ease-in-out infinite;
}
@keyframes tbounce {
    0%, 80%, 100% { transform: translateY(0) }
    40% { transform: translateY(-6px) }
}

/* ── Input area ── */
.chat-input-area {
    border-top: 1px solid var(--bd);
    padding: 14px 20px 10px;
    flex-shrink: 0;
}

.input-wrapper {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    background: var(--sf2);
    border: 1.5px solid var(--bd);
    border-radius: 22px;
    padding: 12px 16px;
    transition: border-color .2s, box-shadow .2s;
    box-shadow: 0 4px 20px rgba(0,0,0,.1);
}
.input-wrapper:focus-within {
    border-color: var(--p4);
    box-shadow: 0 8px 30px var(--glow);
}

.input-tools {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-shrink: 0;
}

.input-tool-btn {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
}
.input-tool-btn:hover { background: var(--cu); color: var(--p4) }

.chat-textarea {
    flex: 1;
    border: none;
    outline: none;
    resize: none;
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 14.5px;
    line-height: 1.5;
    max-height: 160px;
    overflow-y: auto;
    scrollbar-width: none;
}
.chat-textarea::placeholder { color: var(--tx3) }
.chat-textarea::-webkit-scrollbar { display: none }

.send-btn {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
    box-shadow: 0 0 14px var(--glow);
}
.send-btn:hover { filter: brightness(1.15); transform: scale(1.06) }
.send-btn:disabled { opacity: .4; cursor: not-allowed; transform: none }

.input-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 8px;
    padding: 0 2px;
}

/* ── Background canvas ── */
#bg-canvas { background: var(--bg) }

/* ── Scrollbar in sidebar ── */
.chat-history::-webkit-scrollbar { width: 3px }
.chat-history::-webkit-scrollbar-thumb { background: var(--bd); border-radius: 2px }

/* ── Settings Modal ── */
.settings-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.7);
    backdrop-filter: blur(8px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
}
.settings-modal.show {
    display: flex;
    animation: fadeIn .3s ease;
}
@keyframes fadeIn {
    from { opacity: 0 }
    to { opacity: 1 }
}
.settings-modal-content {
    background: var(--cb);
    border: 1px solid var(--bd);
    border-radius: 16px;
    width: 100%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,.5);
    animation: slideUp .3s ease;
}
@keyframes slideUp {
    from { opacity: 0; transform: translateY(30px) scale(.95) }
    to { opacity: 1; transform: translateY(0) scale(1) }
}
.settings-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--bd2);
}
.settings-title {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 24px;
    font-weight: 700;
    color: var(--tx);
    margin: 0;
}
.settings-close {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx2);
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .2s;
}
.settings-close:hover {
    background: var(--cu);
    color: var(--p4);
    border-color: var(--p4);
}
.settings-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 24px;
}
.settings-section {
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.settings-section-title {
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--p4);
    margin: 0;
}
.setting-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}
.setting-label {
    font-size: 13.5px;
    font-weight: 500;
    color: var(--tx);
    flex: 1;
}
.setting-select, .setting-input {
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    color: var(--tx);
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    min-width: 150px;
    cursor: pointer;
    transition: border-color .2s;
}
.setting-select:focus, .setting-input:focus {
    outline: none;
    border-color: var(--p4);
}
.setting-input {
    width: 80px;
    min-width: 80px;
}
.setting-toggle {
    position: relative;
    width: 48px;
    height: 26px;
}
.setting-toggle input {
    display: none;
}
.toggle-label {
    position: absolute;
    inset: 0;
    background: var(--bd2);
    border-radius: 26px;
    cursor: pointer;
    transition: background .3s;
}
.toggle-label::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    transition: transform .3s;
}
.setting-toggle input:checked + .toggle-label {
    background: var(--p4);
}
.setting-toggle input:checked + .toggle-label::after {
    transform: translateX(22px);
}
.setting-action-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 10px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    color: var(--tx);
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all .2s;
}
.setting-action-btn:hover {
    background: var(--cu);
    border-color: var(--p4);
    color: var(--p5);
    transform: translateY(-1px);
}
.setting-action-btn.clear-btn:hover {
    background: rgba(239,68,68,.08);
    border-color: var(--red);
    color: var(--red);
}
.settings-footer {
    padding: 16px 24px;
    border-top: 1px solid var(--bd2);
    display: flex;
    justify-content: flex-end;
}
.settings-save-btn {
    padding: 10px 24px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(135deg, #5b21b6, var(--p4));
    color: white;
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px var(--glow);
    transition: all .2s;
}
.settings-save-btn:hover {
    filter: brightness(1.15);
    transform: translateY(-1px);
    box-shadow: 0 6px 16px var(--glow);
}

/* ── Loading Screen ── */
.loading-overlay {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 24px;
    animation: fadeIn .4s ease both;
}
.loading-overlay.hidden { display: none }
.loading-spinner {
    width: 64px;
    height: 64px;
    position: relative;
}
.spinner-ring {
    position: absolute;
    inset: 0;
    border: 4px solid var(--bd2);
    border-top-color: var(--p4);
    border-radius: 50%;
    animation: spin 1s cubic-bezier(.6,.2,.4,.8) infinite;
}
.spinner-core {
    position: absolute;
    inset: 12px;
    background: var(--p4);
    border-radius: 40%;
    animation: pulse 1.5s ease-in-out infinite, spin 3s linear reverse infinite;
    opacity: .7;
}
@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
@keyframes pulse { 0%, 100% { transform: scale(1); opacity: .7 } 50% { transform: scale(1.15); opacity: .4 } }
.loading-text {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--tx);
}
.loading-subtext {
    font-size: 13px;
    color: var(--tx2);
    text-align: center;
    max-width: 280px;
    line-height: 1.5;
}

/* ── Enhanced Welcome UI ── */
.welcome-mode-badge {
    padding: 6px 12px;
    border-radius: 20px;
    background: var(--cu);
    border: 1px solid var(--bd);
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}
.welcome-mode-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--p4);
    box-shadow: 0 0 8px var(--p4);
}
.welcome-mode-text {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--p4);
}

.mode-pills {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 12px;
    max-width: 500px;
}
.mode-pill {
    padding: 8px 14px;
    border-radius: 12px;
    border: 1px solid var(--bd2);
    background: var(--sf2);
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    color: var(--tx2);
    transition: all .2s;
    display: flex;
    align-items: center;
    gap: 6px;
}
.mode-pill:hover { border-color: var(--p4); color: var(--tx); background: var(--cu); transform: translateY(-1px) }
.mode-pill.active { border-color: var(--p4); color: var(--p5); background: var(--cu); box-shadow: 0 0 16px var(--glow) }

/* ── Improved Feed Cards ── */
.feed-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  max-width: 100%;
}
.feed-card {
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  background: var(--cb);
  border: 1px solid var(--bd);
  padding: 24px;
  display: flex;
  flex-direction: column;
  transition: all .35s cubic-bezier(.23,1,.32,1);
}
.feed-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; height: 4px;
  background: linear-gradient(90deg, var(--p4), var(--ac));
  opacity: 0;
  transition: opacity .3s;
}
.feed-card:hover {
  transform: translateY(-4px) scale(1.01);
  border-color: var(--p4);
  box-shadow: 0 12px 32px rgba(139, 92, 246, .15);
}
.feed-card:hover::before { opacity: 1 }

.feed-card-header { margin-bottom: 12px }
.feed-card-type { font-size: 10px; padding: 4px 8px; border-radius: 6px; background: var(--cu); border: 1px solid var(--bd2) }
.feed-card-title { font-size: 17px; font-weight: 700; margin-bottom: 10px; font-family: 'Plus Jakarta Sans', sans-serif }
.feed-card-desc { font-size: 12.5px; color: var(--tx2); line-height: 1.6; margin-bottom: 16px; flex: 1 }
.feed-card-actions { margin-top: auto; padding-top: 16px; border-top: 1px solid var(--bd2); gap: 10px }
.feed-card-btn {
    flex: 1;
    text-align: center;
    padding: 9px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: 700;
    background: var(--sf2);
    border: 1px solid var(--bd2);
    color: var(--tx2);
}
.feed-card-btn:hover { background: var(--cu); border-color: var(--p4); color: var(--p5) }
.feed-card-btn.primary { background: var(--p4); border-color: var(--p4); color: white }
.feed-card-btn.primary:hover { filter: brightness(1.15) }

/* ── Improved Empty States ── */
.feed-empty {
    max-width: 500px;
    margin: 60px auto;
    padding: 40px;
    border-radius: 24px;
    background: var(--sf2);
    border: 1px dashed var(--bd);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 16px;
    animation: fadeUp .6s ease both;
}
.empty-icon {
    font-size: 48px;
    margin-bottom: 8px;
    filter: drop-shadow(0 0 12px var(--glow));
}
.empty-title {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 24px;
    font-weight: 700;
    color: var(--tx);
}
.empty-sub {
    font-size: 14px;
    color: var(--tx2);
    line-height: 1.5;
    max-width: 300px;
}

/* ── Responsive ── */
@media (max-width: 640px) {
    .sidebar { position: fixed; left: 0; top: 0; bottom: 0; z-index: 200; }
    .sidebar.collapsed { transform: translateX(-100%); width: var(--sidebar-w); min-width: var(--sidebar-w); opacity: 0 }
    .suggestion-grid { grid-template-columns: 1fr }
    .mood-row { flex-wrap: wrap }
}

/* ── Streaming cursor ── */
.streaming-cursor::after {
    content: '▋';
    color: var(--p4);
    animation: blink .7s step-end infinite;
    margin-left: 1px;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

/* ── Error message ── */
.msg-bubble.error {
    background: rgba(239,68,68,.08);
    border-color: rgba(239,68,68,.25);
    color: var(--red);
}

/* ── Flashcard Renderer ── */
.flashcard-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 12px;
    margin: 16px 0;
}
.flashcard {
    perspective: 1000px;
    height: 180px;
    cursor: pointer;
}
.flashcard-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform .6s;
    transform-style: preserve-3d;
}
.flashcard.flipped .flashcard-inner {
    transform: rotateY(180deg);
}
.flashcard-front, .flashcard-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border: 1px solid var(--bd);
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: var(--sf2);
}
.flashcard-back {
    transform: rotateY(180deg);
    background: var(--cu);
}
.flashcard-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--p4);
    margin-bottom: 8px;
}
.flashcard-text {
    font-size: 14px;
    font-weight: 500;
    color: var(--tx);
    line-height: 1.5;
}

/* ── Study Guide Renderer ── */
.study-guide {
    margin: 16px 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.study-guide-section {
    border: 1px solid var(--bd);
    border-radius: 10px;
    background: var(--sf2);
    overflow: hidden;
}
.study-guide-title {
    padding: 12px 14px;
    font-weight: 600;
    font-size: 13px;
    color: var(--tx);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background .2s;
}
.study-guide-title:hover {
    background: var(--cu);
}
.toggle-icon {
    font-size: 10px;
    transition: transform .3s;
}
.study-guide-section.collapsed .toggle-icon {
    transform: rotate(-90deg);
}
.study-guide-content {
    padding: 0 14px 12px;
    font-size: 13px;
    color: var(--tx2);
    line-height: 1.6;
    white-space: pre-wrap;
    max-height: 500px;
    transition: max-height .3s ease, padding .3s ease;
    overflow: hidden;
}
.study-guide-section.collapsed .study-guide-content {
    max-height: 0;
    padding: 0 14px;
}

/* ── Practice Test Renderer ── */
.practice-test {
    margin: 16px 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.practice-question {
    border: 1px solid var(--bd);
    border-radius: 10px;
    padding: 14px;
    background: var(--sf2);
}
.practice-q-number {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--p4);
    margin-bottom: 8px;
}
.practice-q-text {
    font-size: 13.5px;
    color: var(--tx);
    margin-bottom: 12px;
    line-height: 1.5;
}
.practice-answer {
    width: 100%;
    min-height: 80px;
    padding: 10px;
    border: 1px solid var(--bd);
    border-radius: 8px;
    background: var(--bg2);
    color: var(--tx);
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px;
    resize: vertical;
    transition: border-color .2s;
}
.practice-answer:focus {
    outline: none;
    border-color: var(--p4);
}
.practice-submit-btn {
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(135deg, #5b21b6, var(--p4));
    color: white;
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    align-self: flex-start;
}
.practice-submit-btn:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
}

/* ── Study Feed ── */
.study-feed-body {
  flex: 1;
  overflow-y: auto;
  padding: 24px 20px;
  scrollbar-width: thin;
}
.study-feed-body::-webkit-scrollbar { width: 4px }
.study-feed-body::-webkit-scrollbar-thumb { background: var(--bd); border-radius: 2px }

.study-feed-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  margin-bottom: 20px;
  max-width: 720px;
}
.feed-search {
  flex: 1;
  min-width: 200px;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--bd);
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 13px;
  transition: border-color .2s;
}
.feed-search:focus {
  outline: none;
  border-color: var(--p4);
}
.feed-search::placeholder { color: var(--tx3) }
.feed-filters {
  display: flex;
  gap: 8px;
}
.feed-filter-select {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--bd);
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 12px;
  cursor: pointer;
  transition: border-color .2s;
}
.feed-filter-select:focus {
  outline: none;
  border-color: var(--p4);
}

.feed-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  max-width: 960px;
}
.feed-card {
  border-radius: 14px;
  padding: 16px;
  border: 1px solid var(--bd);
  transition: border-color .2s, box-shadow .2s;
}
.feed-card:hover {
  border-color: var(--p4);
  box-shadow: 0 4px 16px rgba(139, 92, 246, .12);
}
.feed-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}
.feed-card-type {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: var(--p4);
}
.feed-card-source {
  font-size: 10px;
  color: var(--tx3);
  background: var(--bd2);
  padding: 2px 8px;
  border-radius: 6px;
}
.feed-card-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--tx);
  margin: 0 0 6px;
  line-height: 1.3;
}
.feed-card-desc {
  font-size: 12px;
  line-height: 1.5;
  margin: 0 0 10px;
}
.feed-card-meta {
  font-size: 11px;
  margin-bottom: 12px;
}
.feed-card-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.feed-card-btn {
  padding: 6px 12px;
  border-radius: 8px;
  border: 1px solid var(--bd);
  background: var(--sf2);
  color: var(--tx2);
  font-size: 12px;
  font-weight: 600;
  text-decoration: none;
  transition: all .2s;
}
.feed-card-btn:hover {
  border-color: var(--p4);
  color: var(--p5);
  background: var(--cu);
}
.feed-empty {
  max-width: 480px;
  padding: 40px 20px;
  text-align: center;
}
.feed-empty.hidden { display: none }

/* ── Item detail page ── */
.item-detail { max-width: 720px; margin: 0 auto; padding: 0 8px; }
.item-meta-bar { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
.item-detail-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 24px; font-weight: 700; color: var(--tx); margin: 0 0 8px; }
.item-detail-desc { font-size: 14px; line-height: 1.5; margin: 0 0 16px; }
.item-actions { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 24px; }
.item-body { margin-top: 20px; }

/* ── Create Study Item flow ── */
.create-flow-body { flex: 1; overflow-y: auto; padding: 24px 20px; max-width: 640px; margin: 0 auto; }
.create-step-panel.hidden { display: none; }
.create-steps {
  display: flex;
  gap: 8px;
  margin-bottom: 28px;
  flex-wrap: wrap;
}
.create-step {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 8px;
  border: 1px solid var(--bd2);
  background: var(--sf2);
  color: var(--tx3);
  font-size: 12px;
  font-weight: 600;
  transition: color .2s, border-color .2s, background .2s;
}
.create-step.active { color: var(--p5); border-color: var(--bd); background: var(--cu); }
.create-step-num {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--bd2);
  color: var(--tx3);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}
.create-step.active .create-step-num { background: var(--p4); color: white; }
.create-panel-title {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 20px;
  font-weight: 700;
  color: var(--tx);
  margin: 0 0 20px;
}
.create-type-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}
.create-type-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 20px 16px;
  border-radius: 14px;
  border: 1px solid var(--bd);
  background: var(--sf2);
  color: var(--tx);
  font-family: 'Plus Jakarta Sans', sans-serif;
  cursor: pointer;
  transition: border-color .2s, background .2s, transform .2s;
}
.create-type-card:hover { border-color: var(--p4); background: var(--cu); transform: translateY(-2px); }
.create-type-emoji { font-size: 28px; margin-bottom: 8px; }
.create-type-name { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
.create-type-desc { font-size: 11px; line-height: 1.4; }
.create-method-list { display: flex; flex-direction: column; gap: 8px; }
.create-method-btn {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  border-radius: 12px;
  border: 1px solid var(--bd);
  background: var(--sf2);
  color: var(--tx);
  font-family: 'Plus Jakarta Sans', sans-serif;
  text-align: left;
  cursor: pointer;
  transition: border-color .2s, background .2s;
}
.create-method-btn:hover { border-color: var(--p4); background: var(--cu); }
.create-method-btn span:first-child { font-size: 24px; }
.create-form { display: flex; flex-direction: column; gap: 14px; }
.create-label { font-size: 12px; font-weight: 600; color: var(--tx2); }
.create-input {
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--bd);
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 13px;
  color: var(--tx);
  transition: border-color .2s;
}
.create-input:focus {
  outline: none;
  border-color: var(--p4);
}
.create-input::placeholder { color: var(--tx3) }
.create-textarea { resize: vertical; min-height: 60px; }
.create-form-actions { display: flex; gap: 10px; flex-wrap: wrap; }
.create-review-summary {
  padding: 12px 14px;
  border-radius: 10px;
  background: var(--sf2);
  border: 1px solid var(--bd2);
  margin-bottom: 16px;
}
