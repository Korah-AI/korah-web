<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>KaTeX Test</title>

<!-- KaTeX CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"/>
</head>
<body style="padding: 40px; font-family: sans-serif; background: #1a1a1a; color: #fff;">

<h1>KaTeX Rendering Test</h1>

<div id="test-content" style="background: #2a2a2a; padding: 20px; border-radius: 8px; margin: 20px 0;">
  <h3>Test 1: Display Math with $$</h3>
  <p>The quadratic formula is: $$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$</p>
  
  <h3>Test 2: Inline Math with $</h3>
  <p>Einstein's famous equation is $E = mc^2$ which relates energy and mass.</p>
  
  <h3>Test 3: Display Math with \[ \]</h3>
  <p>The area of a circle: \[A = \pi r^2\]</p>
  
  <h3>Test 4: Inline Math with \( \)</h3>
  <p>The Pythagorean theorem states that \(a^2 + b^2 = c^2\) for right triangles.</p>
</div>

<div id="status" style="margin-top: 20px; padding: 15px; background: #333; border-radius: 8px;">
  <h3>Debug Info:</h3>
  <pre id="debug-output" style="color: #0f0; font-family: monospace;"></pre>
</div>

<!-- KaTeX JS -->
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>

<script>
  const debugOutput = document.getElementById('debug-output');
  const testContent = document.getElementById('test-content');
  
  // Check if libraries loaded
  debugOutput.textContent = `KaTeX available: ${typeof katex !== 'undefined'}\n`;
  debugOutput.textContent += `renderMathInElement available: ${typeof renderMathInElement !== 'undefined'}\n`;
  debugOutput.textContent += `window.katex available: ${typeof window.katex !== 'undefined'}\n`;
  debugOutput.textContent += `window.renderMathInElement available: ${typeof window.renderMathInElement !== 'undefined'}\n\n`;
  
  if (typeof renderMathInElement !== 'undefined') {
    debugOutput.textContent += 'Attempting to render math...\n';
    
    try {
      renderMathInElement(testContent, {
        delimiters: [
          { left: "$$", right: "$$", display: true },
          { left: "\\[", right: "\\]", display: true },
          { left: "\\(", right: "\\)", display: false },
          { left: "$", right: "$", display: false },
        ],
        throwOnError: false,
      });
      debugOutput.textContent += 'Math rendering completed successfully!\n';
    } catch (e) {
      debugOutput.textContent += `Error: ${e.message}\n`;
      console.error('KaTeX error:', e);
    }
  } else {
    debugOutput.textContent += 'ERROR: renderMathInElement function not found!\n';
  }
</script>

</body>
</html>
